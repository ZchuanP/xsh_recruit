# 数据库连接池
---
#### 意义

+ 数据库连接是一种关键的、有限的、昂贵的资源，这一点在多用户的网页应用程序中体现得尤为突出。对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性，影响到程序的性能指标。
+ 当不使用数据库连接池时，每一次访问数据库建立一次数据库连接 将会经过TCP的三次握手，MySQL认证的三次握手，SQL执行，MySQL连接关闭，TCP四次握手关闭的步骤，这将会耗费大量的时间，程序执行的效率会显著不足。
![](https://img2018.cnblogs.com/blog/1606768/201906/1606768-20190616160227257-97394613.png)
---
#### 做法
+ 数据库连接池在初始化的时候会初始化一定数量的数据库连接放到数据库连接池中。在程序运行的整个过程中，数据库连接的数量受到两个方面的制约
> 最小连接数量：无论是否使用，连接池将一直至少拥有这么多的连接数量<br/>
> 最大连接数量：当程序向连接池的请求连接数超过最大连接数量时，这些请求将会被加入到等待队列中

---
#### mybatis中连接池配置方式

配置位置：主配置文件中的dataSource标签，type属性可用于表示使用何种连接池方式。
1. POOLED  传统的javax.sql.DataSource规范中的连接池，mybatis中有针对规范的实现
2. UNPOOLED 采用传统获取连接的方式，也实现了javax.sql.DataSource接口，但没有池的概念，每次创建新的连接
3. JNDI  采用服务器提供的JNDI技术实现，来获取DataSource对象，不同服务器拿到的连接不同。在tomcat中采用的是dbcp连接池。

---
#### 注意

+ 连接池就是一个用于存储数据库连接的一个容器（集合对象）。该集合必须是线程安全的，不能两个线程拿到同一个连接。该集合还必须实现队列先进先出的特性。

